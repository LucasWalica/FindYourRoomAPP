<div class="m-4 p-4 bg-green3 text-green1 rounded-md shadow-md absolute w-full">
    <app-nav-bar></app-nav-bar>
    <!-- Título principal -->
    <h1 class="text-2xl font-bold text-center text-green2 mb-6">Admin Panel</h1>
    <!-- Lista de casas -->
    <div *ngFor="let house of this.houses" class="mb-6">
        <!-- Tarjeta de cada casa -->
        <div class="bg-green3 rounded-lg shadow-md p-4 border-2 border-green2 hover:shadow-lg transition duration-300">
            <div class="grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4">
                <p><strong>Name:</strong> {{ house.name }}</p>
                <p><strong>Description:</strong> {{ house.desc }}</p>
                <p><strong>Type:</strong> {{ house.house_type }}</p>
                <p><strong>Size:</strong> {{ house.m2 }} m²</p>
                <p><strong>Price:</strong> ${{ house.price }}</p>
                <p><strong>Rooms:</strong> {{ house.rooms }}</p>
            </div>

            <!-- Acciones principales -->
            <div class="flex flex-wrap justify-center gap-4 mt-4">
                <button 
                    (click)="goToUpdateHouse(house)" 
                    class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition duration-300">
                    Update
                </button>
                <button 
                    (click)="goToDeleteHouse(house)" 
                    class="bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition duration-300">
                    Delete
                </button>
                @if (house.house_requests && house.house_requests.length > 0) {
                    <button (click)="showHouseRequestsfunc(house.id)">
                        Show House Requests
                    </button>
                }
                <button 
                    (click)="goToDetailView(house)" 
                    class="bg-green1 text-green3 px-4 py-2 rounded-md border-2 border-green1 hover:bg-green2 hover:text-green1 transition duration-300">
                    View Details
                </button>
            </div>
        </div>
        @if (house.rooms) {
            <!-- Lista de cuartos -->
        <div class="flex justify-center m-2">
                <h2 class="text-xl font-semibold text-green2 mb-4 text-center m-2">Rooms</h2>
            <div *ngFor="let room of house.rooms_data" 
            class="w-3/5 bg-gray-50 rounded-lg shadow-md p-4 border-2 border-green2 hover:shadow-lg transition duration-300 mb-4">
                <div class="grid sm:grid-cols-1 md:grid-cols-3 gap-4 items-center">
                    <p><strong>Description:</strong> {{ room.desc }}</p>
                    <p><strong>Size:</strong> {{ room.m2 }} m²</p>
                    <p><strong>Price:</strong> ${{ room.price }}</p>
                </div>

                <!-- Botón de acción para el cuarto -->
                <div class="flex justify-center mt-4">
                    <button 
                        (click)="goToUpdateRoom(room)" 
                        class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition duration-300">
                        Update Room
                    </button>
                    @if (room.room_requests && room.room_requests.length>0) {
                        <button (click)="this.showRoomRequestsfunc(room.id)">
                            Show Room Requests
                        </button>
                    }
                </div>
            </div>
        </div>
        }
    </div>
    <app-footer></app-footer>
</div>

@if (this.showHouseRequests) {
    <div class="bg-green3 relative mt-0 ">
      <div>People requesting this house: </div>
      @for (tenant of this.tenantProfilesRequesting; track tenant) {
        <div>
            <app-other-tenant-profile [inquilinoProfile]="tenant" ></app-other-tenant-profile>
        </div> 
    }
    </div>
}


@if (this.showRoomRequests) {
    <div class="bg-green3 relative mt-0 ">
       <div>People requesting this room:</div>
       @for (tenant of this.tenantProfilesRequesting; track tenant) {
        <div>
            <app-other-tenant-profile [inquilinoProfile]="tenant" ></app-other-tenant-profile>
        </div>        
    }
    </div>
}
